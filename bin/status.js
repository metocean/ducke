// Generated by CoffeeScript 1.8.0
module.exports = function(ducke) {
  return ducke.ping(function(err, isUp) {
    if ((err != null) || !isUp) {
      console.error();
      console.error('  docker is down'.red);
      console.error();
      return process.exit(1);
    } else {
      return ducke.ps(function(err, results) {
        var ess, running, stopped;
        if ((err != null) || results.length === 0) {
          console.error();
          console.error('  There are no docker containers on this system'.magenta);
          console.error();
        } else {
          ess = function(num, s, p) {
            if (num === 1) {
              return s;
            } else {
              return p;
            }
          };
          running = results.filter(function(d) {
            return d.inspect.State.Running;
          }).length;
          stopped = results.length - running;
          console.error();
          console.error("  There " + (ess(running, 'is', 'are')) + " " + (running.toString().green) + " running container" + (ess(running, '', 's')) + " and " + (stopped.toString().red) + " stopped container" + (ess(stopped, '', 's')));
          console.error();
        }
        return process.exit(1);
      });
    }
  });
};

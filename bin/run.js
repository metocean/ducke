// Generated by CoffeeScript 1.8.0
module.exports = function(ducke, image, cmd) {
  var fin, run;
  run = function(err, id) {
    if (err != null) {
      if ((err.statusCode != null) && err.statusCode === 404) {
        console.error();
        console.error("  Image " + image.red + " not found");
        console.error();
      } else {
        console.error();
        console.error(err);
        console.error();
      }
      process.exit(1);
    }
    return ducke.container(id).inspect(function(err, inspect) {
      var name;
      if (err != null) {
        console.error(err);
        process.exit(1);
      }
      name = inspect.Name.slice(1);
      image = inspect.Config.Image;
      console.log();
      console.log("  " + 'running'.green + " " + name + " (" + image + ")");
      return console.log();
    });
  };
  fin = function(err, code) {
    if (err != null) {
      console.error(err);
      process.exit(1);
    }
    return process.exit(code);
  };
  if ((cmd == null) || cmd.length === 0) {
    cmd = ['bash'];
  }
  return ducke.image(image).run(cmd, process.stdin, process.stdout, process.stderr, run, fin);
};

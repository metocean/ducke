// Generated by CoffeeScript 1.8.0
module.exports = function(ducke) {
  return ducke.ls(function(err, result) {
    var node, orphans, _i, _j, _len, _len1, _ref;
    if (err != null) {
      console.error(err);
      console.error(JSON.stringify(err));
      process.exit(1);
    }
    orphans = [];
    console.log();
    _ref = result.images;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      node = _ref[_i];
      if (node.image.RepoTags.length === 1 && node.image.RepoTags[0] === '<none>:<none>' && node.children.length === 0) {
        orphans.push(node);
      }
    }
    if (orphans.length === 0) {
      console.log('  There are no orphaned images on this system.'.magenta);
    } else {
      for (_j = 0, _len1 = orphans.length; _j < _len1; _j++) {
        node = orphans[_j];
        console.log("" + (node.image.Id.substr(0, 12)));
      }
    }
    return console.log();
  });
};
